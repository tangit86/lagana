(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{143:function(e,t,n){"use strict";n.r(t);var a,r,c,i,s,o,u,l,d=n(0),h=n.n(d),f=n(19),p=n.n(f),m=(n(68),n(9)),b=(n(71),n(72),n(73),n(8)),O=n(13),v=n(5),g=n(11),E=n(12),j=n(23),T=(n(28),n(4)),w=n.n(T),S=n(2),y=n(7),N=n(10),C=n(16),k=n.n(C),I=n(62),x="http://localhost:3333".replace(/\/+$/,""),M=function(e){Object(g.a)(n,e);var t=Object(E.a)(n);function n(e,a){var r;return Object(b.a)(this,n),(r=t.call(this,a)).field=e,r.name="RequiredError",r}return n}(Object(I.a)(Error));!function(e){e.EQ="EQ",e.NOTEQ="NOTEQ",e.CONTAINS="CONTAINS",e.NOTCONTAINS="NOTCONTAINS",e.IN="IN",e.NOTIN="NOTIN",e.EMPTY="EMPTY",e.NOTEMPTY="NOTEMPTY",e.LT="LT",e.GT="GT",e.BETWEEN="BETWEEN",e.REGEX="REGEX"}(a||(a={})),function(e){e.STRING="STRING",e.NUMERIC="NUMERIC",e.BOOLEAN="BOOLEAN",e.TIMESTAMP="TIMESTAMP",e.XML="XML",e.JSON="JSON"}(r||(r={})),function(e){e.ACTIVE="ACTIVE",e.WARNING="WARNING",e.STOPPED="STOPPED"}(c||(c={})),function(e){e.STRING="STRING",e.NUMERIC="NUMERIC",e.BOOLEAN="BOOLEAN",e.TIMESTAMP="TIMESTAMP",e.XML="XML",e.JSON="JSON"}(i||(i={})),function(e){e.EQ="EQ",e.NOTEQ="NOTEQ",e.CONTAINS="CONTAINS",e.NOTCONTAINS="NOTCONTAINS",e.IN="IN",e.NOTIN="NOTIN",e.EMPTY="EMPTY",e.NOTEMPTY="NOTEMPTY",e.LT="LT",e.GT="GT",e.BETWEEN="BETWEEN",e.REGEX="REGEX"}(s||(s={})),function(e){e.EQ="EQ",e.NOTEQ="NOTEQ",e.CONTAINS="CONTAINS",e.NOTCONTAINS="NOTCONTAINS",e.IN="IN",e.NOTIN="NOTIN",e.EMPTY="EMPTY",e.NOTEMPTY="NOTEMPTY",e.LT="LT",e.GT="GT",e.BETWEEN="BETWEEN",e.REGEX="REGEX"}(o||(o={})),function(e){e.TEXT="TEXT",e.JSON="JSON",e.XML="XML"}(u||(u={})),function(e){e.CONSOLESTREAM="CONSOLE_STREAM",e.FILE="FILE",e.HTTP="HTTP"}(l||(l={}));var R=function(e){return{fetch:function(){var t=Object(y.a)(w.a.mark((function t(n){var a,r,c,i,s,o,u,l,d,h=arguments;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=h.length>1&&void 0!==h[1]?h[1]:{},r="/api/fetch",c=N.parse(r,!0),e&&(i=e.baseOptions),s=Object(S.a)(Object(S.a)({method:"POST"},i),a),u={},(o={})["Content-Type"]="application/json",c.query=Object(S.a)(Object(S.a)(Object(S.a)({},c.query),u),a.query),l=i&&i.headers?i.headers:{},s.headers=Object(S.a)(Object(S.a)(Object(S.a)({},o),l),a.headers),d="string"!==typeof n||"application/json"===s.headers["Content-Type"],s.data=d?JSON.stringify(void 0!==n?n:{}):n||"",t.abrupt("return",{url:N.format(c),options:s});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),fetchFieldSuggestions:function(){var t=Object(y.a)(w.a.mark((function t(n){var a,r,c,i,s,o,u,l,d=arguments;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=d.length>1&&void 0!==d[1]?d[1]:{},null!==n&&void 0!==n){t.next=3;break}throw new M("fieldId","Required parameter fieldId was null or undefined when calling fetchFieldSuggestions.");case 3:return r="/api/fetch/suggestions/{fieldId}".replace("{".concat("fieldId","}"),encodeURIComponent(String(n))),c=N.parse(r,!0),e&&(i=e.baseOptions),s=Object(S.a)(Object(S.a)({method:"GET"},i),a),o={},u={},c.query=Object(S.a)(Object(S.a)(Object(S.a)({},c.query),u),a.query),l=i&&i.headers?i.headers:{},s.headers=Object(S.a)(Object(S.a)(Object(S.a)({},o),l),a.headers),t.abrupt("return",{url:N.format(c),options:s});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),fetchSchema:function(){var t=Object(y.a)(w.a.mark((function t(){var n,a,r,c,i,s,o,u,l=arguments;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>0&&void 0!==l[0]?l[0]:{},a="/api/fetch/schema",r=N.parse(a,!0),e&&(c=e.baseOptions),i=Object(S.a)(Object(S.a)({method:"GET"},c),n),s={},o={},r.query=Object(S.a)(Object(S.a)(Object(S.a)({},r.query),o),n.query),u=c&&c.headers?c.headers:{},i.headers=Object(S.a)(Object(S.a)(Object(S.a)({},s),u),n.headers),t.abrupt("return",{url:N.format(r),options:i});case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),get:function(){var t=Object(y.a)(w.a.mark((function t(){var n,a,r,c,i,s,o,u,l=arguments;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>0&&void 0!==l[0]?l[0]:{},a="/api/conf",r=N.parse(a,!0),e&&(c=e.baseOptions),i=Object(S.a)(Object(S.a)({method:"GET"},c),n),s={},o={},r.query=Object(S.a)(Object(S.a)(Object(S.a)({},r.query),o),n.query),u=c&&c.headers?c.headers:{},i.headers=Object(S.a)(Object(S.a)(Object(S.a)({},s),u),n.headers),t.abrupt("return",{url:N.format(r),options:i});case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),getDashboards:function(){var t=Object(y.a)(w.a.mark((function t(n){var a,r,c,i,s,o,u,l,d=arguments;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=d.length>1&&void 0!==d[1]?d[1]:{},null!==n&&void 0!==n){t.next=3;break}throw new M("dashboardNames","Required parameter dashboardNames was null or undefined when calling getDashboards.");case 3:return r="/api/dashboards",c=N.parse(r,!0),e&&(i=e.baseOptions),s=Object(S.a)(Object(S.a)({method:"GET"},i),a),o={},u={},n&&(u.dashboardNames=n),c.query=Object(S.a)(Object(S.a)(Object(S.a)({},c.query),u),a.query),l=i&&i.headers?i.headers:{},s.headers=Object(S.a)(Object(S.a)(Object(S.a)({},o),l),a.headers),t.abrupt("return",{url:N.format(c),options:s});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getOverview:function(){var t=Object(y.a)(w.a.mark((function t(n){var a,r,c,i,s,o,u,l,d=arguments;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=d.length>1&&void 0!==d[1]?d[1]:{},null!==n&&void 0!==n){t.next=3;break}throw new M("feeders","Required parameter feeders was null or undefined when calling getOverview.");case 3:return r="/api/feeder",c=N.parse(r,!0),e&&(i=e.baseOptions),s=Object(S.a)(Object(S.a)({method:"GET"},i),a),o={},u={},n&&(u.feeders=n),c.query=Object(S.a)(Object(S.a)(Object(S.a)({},c.query),u),a.query),l=i&&i.headers?i.headers:{},s.headers=Object(S.a)(Object(S.a)(Object(S.a)({},o),l),a.headers),t.abrupt("return",{url:N.format(c),options:s});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),setConf:function(){var t=Object(y.a)(w.a.mark((function t(n){var a,r,c,i,s,o,u,l,d,h=arguments;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=h.length>1&&void 0!==h[1]?h[1]:{},r="/api/conf",c=N.parse(r,!0),e&&(i=e.baseOptions),s=Object(S.a)(Object(S.a)({method:"POST"},i),a),u={},(o={})["Content-Type"]="application/json",c.query=Object(S.a)(Object(S.a)(Object(S.a)({},c.query),u),a.query),l=i&&i.headers?i.headers:{},s.headers=Object(S.a)(Object(S.a)(Object(S.a)({},o),l),a.headers),d="string"!==typeof n||"application/json"===s.headers["Content-Type"],s.data=d?JSON.stringify(void 0!==n?n:{}):n||"",t.abrupt("return",{url:N.format(c),options:s});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),start:function(){var t=Object(y.a)(w.a.mark((function t(n){var a,r,c,i,s,o,u,l,d=arguments;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=d.length>1&&void 0!==d[1]?d[1]:{},null!==n&&void 0!==n){t.next=3;break}throw new M("feeder","Required parameter feeder was null or undefined when calling start.");case 3:return r="/api/feeder/{feeder}/start".replace("{".concat("feeder","}"),encodeURIComponent(String(n))),c=N.parse(r,!0),e&&(i=e.baseOptions),s=Object(S.a)(Object(S.a)({method:"GET"},i),a),o={},u={},c.query=Object(S.a)(Object(S.a)(Object(S.a)({},c.query),u),a.query),l=i&&i.headers?i.headers:{},s.headers=Object(S.a)(Object(S.a)(Object(S.a)({},o),l),a.headers),t.abrupt("return",{url:N.format(c),options:s});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),stop:function(){var t=Object(y.a)(w.a.mark((function t(n){var a,r,c,i,s,o,u,l,d=arguments;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=d.length>1&&void 0!==d[1]?d[1]:{},null!==n&&void 0!==n){t.next=3;break}throw new M("feeder","Required parameter feeder was null or undefined when calling stop.");case 3:return r="/api/feeder/{feeder}/stop".replace("{".concat("feeder","}"),encodeURIComponent(String(n))),c=N.parse(r,!0),e&&(i=e.baseOptions),s=Object(S.a)(Object(S.a)({method:"GET"},i),a),o={},u={},c.query=Object(S.a)(Object(S.a)(Object(S.a)({},c.query),u),a.query),l=i&&i.headers?i.headers:{},s.headers=Object(S.a)(Object(S.a)(Object(S.a)({},o),l),a.headers),t.abrupt("return",{url:N.format(c),options:s});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},q=function(e){return{fetch:function(t,n){return Object(y.a)(w.a.mark((function a(){var r;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,R(e).fetch(t,n);case 2:return r=a.sent,a.abrupt("return",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,n=Object(S.a)(Object(S.a)({},r.options),{},{url:t+r.url});return e.request(n)}));case 4:case"end":return a.stop()}}),a)})))()},fetchFieldSuggestions:function(t,n){return Object(y.a)(w.a.mark((function a(){var r;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,R(e).fetchFieldSuggestions(t,n);case 2:return r=a.sent,a.abrupt("return",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,n=Object(S.a)(Object(S.a)({},r.options),{},{url:t+r.url});return e.request(n)}));case 4:case"end":return a.stop()}}),a)})))()},fetchSchema:function(t){return Object(y.a)(w.a.mark((function n(){var a;return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,R(e).fetchSchema(t);case 2:return a=n.sent,n.abrupt("return",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,n=Object(S.a)(Object(S.a)({},a.options),{},{url:t+a.url});return e.request(n)}));case 4:case"end":return n.stop()}}),n)})))()},get:function(t){return Object(y.a)(w.a.mark((function n(){var a;return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,R(e).get(t);case 2:return a=n.sent,n.abrupt("return",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,n=Object(S.a)(Object(S.a)({},a.options),{},{url:t+a.url});return e.request(n)}));case 4:case"end":return n.stop()}}),n)})))()},getDashboards:function(t,n){return Object(y.a)(w.a.mark((function a(){var r;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,R(e).getDashboards(t,n);case 2:return r=a.sent,a.abrupt("return",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,n=Object(S.a)(Object(S.a)({},r.options),{},{url:t+r.url});return e.request(n)}));case 4:case"end":return a.stop()}}),a)})))()},getOverview:function(t,n){return Object(y.a)(w.a.mark((function a(){var r;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,R(e).getOverview(t,n);case 2:return r=a.sent,a.abrupt("return",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,n=Object(S.a)(Object(S.a)({},r.options),{},{url:t+r.url});return e.request(n)}));case 4:case"end":return a.stop()}}),a)})))()},setConf:function(t,n){return Object(y.a)(w.a.mark((function a(){var r;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,R(e).setConf(t,n);case 2:return r=a.sent,a.abrupt("return",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,n=Object(S.a)(Object(S.a)({},r.options),{},{url:t+r.url});return e.request(n)}));case 4:case"end":return a.stop()}}),a)})))()},start:function(t,n){return Object(y.a)(w.a.mark((function a(){var r;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,R(e).start(t,n);case 2:return r=a.sent,a.abrupt("return",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,n=Object(S.a)(Object(S.a)({},r.options),{},{url:t+r.url});return e.request(n)}));case 4:case"end":return a.stop()}}),a)})))()},stop:function(t,n){return Object(y.a)(w.a.mark((function a(){var r;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,R(e).stop(t,n);case 2:return r=a.sent,a.abrupt("return",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,n=Object(S.a)(Object(S.a)({},r.options),{},{url:t+r.url});return e.request(n)}));case 4:case"end":return a.stop()}}),a)})))()}}},A=function(e,t,n){return{fetch:function(a,r){return q(e).fetch(a,r).then((function(e){return e(n,t)}))},fetchFieldSuggestions:function(a,r){return q(e).fetchFieldSuggestions(a,r).then((function(e){return e(n,t)}))},fetchSchema:function(a){return q(e).fetchSchema(a).then((function(e){return e(n,t)}))},get:function(a){return q(e).get(a).then((function(e){return e(n,t)}))},getDashboards:function(a,r){return q(e).getDashboards(a,r).then((function(e){return e(n,t)}))},getOverview:function(a,r){return q(e).getOverview(a,r).then((function(e){return e(n,t)}))},setConf:function(a,r){return q(e).setConf(a,r).then((function(e){return e(n,t)}))},start:function(a,r){return q(e).start(a,r).then((function(e){return e(n,t)}))},stop:function(a,r){return q(e).stop(a,r).then((function(e){return e(n,t)}))}}},L=n(21),P=n(60),F=n.n(P),G=function(e){var t=new Date(1*e);return F()(t).format("ddd,DD-MMM HH:mm:ss.SSS")},H=n(98),D=function(e,t){var n=H(e,t).replace(">","><br>");return h.a.createElement("div",null,function(e){var t=document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue}(n))};var W=function(e){Object(g.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).apiClient=null,a.pollVar=null,a.state={isLive:!1,allFields:a.props.allFields,initTimer:5e3,timer:3e3},a.apiClient=new A,a.toggleLive=a.toggleLive.bind(Object(v.a)(a)),a.poll=a.poll.bind(Object(v.a)(a)),a}return Object(O.a)(n,[{key:"toggleLive",value:function(){var e=!this.state.isLive;this.setState({isLive:e,timer:this.state.initTimer}),this.pollVar=e?setInterval(this.poll,1e3):clearInterval(this.pollVar)}},{key:"poll",value:function(){var e=this.state.timer;0==e?(this.props.fetch(),e=this.state.initTimer):e-=1e3,this.setState({timer:e})}},{key:"render",value:function(){return console.log(this.pollVar,"pollVar"),h.a.createElement("form",null,h.a.createElement(L.a,{variant:"info",onClick:this.props.fetch},"Search"),"\xa0",h.a.createElement("label",{class:"switch"},h.a.createElement("input",{type:"checkbox",value:this.state.isLive,onChange:this.toggleLive}),h.a.createElement("span",{class:"slider round"})),h.a.createElement("span",null,this.state.isLive?"Reload in ".concat(this.state.timer/1e3,"s"):""))}}]),n}(h.a.Component);var V=n(144),X=n(145),B=n(146),Q=function(e){Object(g.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).apiClient=null,a.state={logs:[],search:{page:1,pageSize:100,filters:[]},selectedIndex:null,selectedRow:null,loading:!1,allFields:[]},a.apiClient=new A,a.fetch=a.fetch.bind(Object(v.a)(a)),a.myRef=h.a.createRef(),a}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.apiClient.fetchSchema().then((function(t){var n=t.data.map((function(e){return e}));e.setState({allFields:n})}),(function(e){console.log("ERROR fetching schema",e)}))}},{key:"componentWillUnmount",value:function(){}},{key:"fetch",value:function(){var e=this;this.setState({loading:!0}),this.apiClient.fetch({page:this.state.search.page,pageSize:this.state.search.pageSize,filters:this.state.search.filters}).then((function(t){t.data.payload?e.setState({logs:J(t.data.payload.results),loading:!1},(function(){document.getElementsByClassName("rt-tbody").item(0).scrollTop=e.state.logs.length>15?30*(e.state.logs.length-12):0})):e.setState({loading:!1})}),(function(t){e.setState({loading:!1})}))}},{key:"render",value:function(){var e,t,n=this,a=[{id:"@timestamp",Header:"Timestamp",accessor:"@timestamp",maxWidth:150,Cell:function(e){return Y("@timestamp",n.state.allFields)(e.row["@timestamp"])}},{id:"@source",Header:"Source",accessor:"@source",maxWidth:100},{id:"@content",Header:"Content",accessor:"@content"}],r={fetch:this.fetch,state:this.state,allFields:this.state.allFields},c=this.state.selectedIndex?"70%":"100%";return h.a.createElement(V.a,{fluid:!0},h.a.createElement(X.a,{style:{backgroundColor:"silver"}},h.a.createElement(B.a,{style:{minWidth:"80%"}},"\xa0"),h.a.createElement(B.a,{className:"justify-content-right align-items-right"},h.a.createElement(W,r))),h.a.createElement(X.a,null,h.a.createElement(B.a,{id:"mainCol",style:{minWidth:{logViewMinWidth:c}}},h.a.createElement(j.a,{sortable:!1,showPagination:!1,pageSize:100,data:this.state.logs,columns:a,loading:this.state.loading,style:{height:window.innerHeight},className:"-striped -highlight",getTbodyProps:function(e,t,n,a,r,c){return{onScroll:function(i,s,o,u,l,d){console.log("A",e,t,n,a,r,c),console.log("a",i,s,o,u,l,d)}}},getTrGroupProps:function(e,t,a,r){if(void 0!==t){var c=t.original["@timestamp"]+t.original["@source"];return{onClick:function(e,a){console.log(r),n.state.selectedIndex===c?n.setState({selectedIndex:null,selectedRow:null}):n.setState({selectedIndex:c,selectedRow:t.original})},style:{cursor:"pointer",background:c===n.state.selectedIndex?"#00afec":"white",color:c===n.state.selectedIndex?"white":"black"}}}}})),h.a.createElement(B.a,{id:"infoCol",hidden:!this.state.selectedIndex},null!=this.state.selectedRow?(e=this.state.selectedRow,t=this.state.allFields,h.a.createElement("table",{border:"5px"},Object.keys(e).map((function(n){var a=Y(n,t),r=a?a(e[n]):e[n];return console.log("formatter for field",a,n),[h.a.createElement("tr",null,h.a.createElement("td",null,n),h.a.createElement("td",{width:"100%",height:"100%"},r))]})))):null)))}}]),n}(h.a.Component);function Y(e,t){var n=t.filter((function(t){return t.name===e}));if(n.length>0){var a=n[0].type;if("TIMESTAMP"===a)return G;if("XML"===a)return D}}function J(e){return Object.keys(e).map((function(t){var n=e[t].values,a={};return Object.keys(n).forEach((function(e){var t=n[e];Object.keys(t).forEach((function(e){var n=t[e];a[n.fn]=n.vl}))})),a}))}var U=function(e){Object(g.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).apiClient=null,a.state={feeders:[]},a.getFeeders=a.getFeeders.bind(Object(v.a)(a)),a.mapFeeder=a.mapFeeder.bind(Object(v.a)(a)),a.start=a.start.bind(Object(v.a)(a)),a.stop=a.stop.bind(Object(v.a)(a)),a.apiClient=new A,a}return Object(O.a)(n,[{key:"componentDidMount",value:function(){this.pollVar=setInterval(this.getFeeders,1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.pollVar),this.pollVar=null}},{key:"getFeeders",value:function(){var e=this;this.apiClient.getOverview("").then((function(t){var n=t.data,a=Object.keys(n).map((function(t){return e.mapFeeder(n[t])}));e.setState({feeders:a})}))}},{key:"mapFeeder",value:function(e){return{name:e.name,targetSeries:e.targetSeries,feederState:e.feederState}}},{key:"start",value:function(e){this.apiClient.start(e).then((function(e){}),(function(e){console.log("ERROR",e)}))}},{key:"stop",value:function(e){this.apiClient.stop(e).then((function(e){}),(function(e){console.log("ERROR",e)}))}},{key:"render",value:function(){var e=this,t=[{id:"name",Header:"Name (ID)",accessor:"name"},{id:"targetSeries",Header:"Target Series",accessor:"targetSeries"},{id:"feederState",Header:"Status",accessor:"feederState"},{id:"action",accessor:"feederState",Cell:function(t){return"STOPPED"===t.value?h.a.createElement(L.a,{variant:"success",onClick:function(n){return e.start(t.row.name)}},"Start"):h.a.createElement(L.a,{variant:"danger",onClick:function(n){return e.stop(t.row.name)}},"Stop")}}];return h.a.createElement(j.a,{showPagination:!1,data:this.state.feeders,columns:t})}}]),n}(h.a.Component),z=(n(100),n(61)),K=n(25),$=function(e){Object(g.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).state={isEdit:!1},a.onChange=a.onChange.bind(Object(v.a)(a)),a}return Object(O.a)(n,[{key:"onChange",value:function(e,t,n){this.props.onChange(e,t,n.target.value)}},{key:"render",value:function(){var e=this,t=this.props.row,n=this.props.cols;this.props.onSave;return h.a.createElement(V.a,{fluid:"md",style:{width:"100%"}},h.a.createElement(X.a,null,h.a.createElement(B.a,null),h.a.createElement(B.a,null),h.a.createElement(B.a,null),h.a.createElement(B.a,{style:{align:"right"}},h.a.createElement("label",{class:"switch"},h.a.createElement("input",{type:"checkbox",value:this.state.isEdit,onChange:function(){e.setState({isEdit:!e.state.isEdit})}}),h.a.createElement("span",{class:"slider round"})),h.a.createElement("span",null,this.state.isEdit?"Edit mode":"View mode"))),n.map((function(n){var a=t[n.id];return[h.a.createElement(X.a,{fluid:"md"},e.state.isEdit?Z(n.id,n.editor?n.editor(a):_(a,(function(a){return e.onChange(t.name,n.id,a)}))):Z(n.id,n.formatter?n.formatter(a):a))]})))}}]),n}(h.a.Component);function _(e,t){return h.a.createElement("input",{width:"box-sizing: border-box;",type:"text",value:e,onChange:function(e){return t(e)}})}function Z(e,t){return h.a.createElement("fieldset",{class:"scheduler-border",width:"box-sizing: border-box;%"},h.a.createElement("legend",{class:"scheduler-border"},e),h.a.createElement("div",{class:"control-group"},h.a.createElement("div",{class:"controls bootstrap-timepicker"},t)))}var ee=function(e){Object(g.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).save=a.save.bind(Object(v.a)(a)),a.change=a.change.bind(Object(v.a)(a)),a.clone=a.clone.bind(Object(v.a)(a)),a.delete=a.delete.bind(Object(v.a)(a)),a}return Object(O.a)(n,[{key:"change",value:function(e,t,n){this.props.onChange(this.props.id,e,t,n)}},{key:"save",value:function(e){console.log("on save called....",this.props.title,e)}},{key:"delete",value:function(){}},{key:"clone",value:function(){}},{key:"render",value:function(){var e=this,t=this.props;return h.a.createElement(V.a,{fluid:!0},h.a.createElement(X.a,null,h.a.createElement(B.a,{style:{width:"100%"}},h.a.createElement("h1",null,t.title),h.a.createElement(K.BootstrapTable,{data:t.rows,expandComponent:function(n){return function(e,t,n,a){var r={row:e,cols:t.cols,onChange:n,onSave:a};return r.cols?h.a.createElement($,r):null}(n,t,e.change,e.save)},expandableRow:function(){return!0}},t.cols.map((function(e){if(e.isHead)return[h.a.createElement(K.TableHeaderColumn,{isKey:e.isKey,width:e.isKey?500:void 0,dataField:e.id,dataFormat:e.formatter?function(t,n){return e.formatter(t)}:void 0},e.id)]})),h.a.createElement(K.TableHeaderColumn,{width:"200px",dataFormat:function(t,n,a,r){return function(e,t,n,a){return h.a.createElement("div",null,h.a.createElement("a",{href:"#",onClick:function(e){return n(t)}},"Clone")," | ",h.a.createElement("a",{href:"#",onClick:function(e){return a(t)}},"Delete")," ",h.a.createElement("span",{title:"Total uses of element in the schema: "+t.count},"(",t.count,")"))}(0,n,e.clone,e.delete)}})))))}}]),n}(h.a.Component);h.a.Component;var te=function(e){Object(g.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).laganaApi=null,a.state={changed:!1,feeders:{},readers:{},fields:{},matchers:{},uses:{}},a.getSchema=a.getSchema.bind(Object(v.a)(a)),a.saveItem=a.saveItem.bind(Object(v.a)(a)),a.change=a.change.bind(Object(v.a)(a)),a.saveSchema=a.saveSchema.bind(Object(v.a)(a)),a.deleteItem=a.deleteItem.bind(Object(v.a)(a)),a.laganaApi=new A,a}return Object(O.a)(n,[{key:"componentDidMount",value:function(){this.getSchema()}},{key:"getSchema",value:function(){var e=Object(y.a)(w.a.mark((function e(){var t=this;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.laganaApi.get().then((function(e){var n=e.data.reapSchema,a={changed:!1,feeders:{},readers:{},fields:{},matchers:{},uses:{}};Object.keys(n).forEach((function(e){n[e].forEach((function(t){a[e][t.name]=t;var n=e+"_"+t.name;a.uses[n]||(a.uses[n]=0),a.uses[n]+=1}))})),console.log("updState",a),t.setState(a)}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveSchema",value:function(){this.laganaApi.setConf({feeders:this.state.feeders,readers:this.state.readers,fields:this.state.fields,matchers:this.state.matchers})}},{key:"saveItem",value:function(e,t,n){console.log("saveItem ",e,t,n);var a=Object.assign({},this.state);a[e][t]=n,a.changed=!0,console.log(a," UPD STATE"),this.setState(a)}},{key:"deleteItem",value:function(e,t){console.log("going to delete>",e,t)}},{key:"change",value:function(e,t,n,a){console.log("CHANGE: ",e,t,n,a);var r=Object.assign({},this.state[e]),c=Object.assign({},r[t]);c[n]=a,r[t]=c,this.setState({changed:!0,updState:r})}},{key:"render",value:function(){return h.a.createElement(V.a,{fluid:!0},h.a.createElement(m.d,null,h.a.createElement(m.b,null,h.a.createElement(m.a,null,"Feeders"),h.a.createElement(m.a,null,"Matchers"),h.a.createElement(m.a,null,"Readers"),h.a.createElement(m.a,null,"Fields")),h.a.createElement(m.c,{forceRender:!0},ne(this.props,this.state.matchers,this.change,this.saveItem,this.deleteItem)),h.a.createElement(m.c,null,ne(this.props,this.state.matchers,this.change,this.saveItem,this.deleteItem)),h.a.createElement(m.c,null,"ok"),h.a.createElement(m.c,null,"ok")),h.a.createElement(X.a,null,h.a.createElement(B.a,null),h.a.createElement(B.a,null,h.a.createElement(L.a,{variant:"success",onClick:this.saveSchema,disabled:!this.state.changed},"Save")),h.a.createElement(B.a,null)))}}]),n}(h.a.Component);function ne(e,t,n,a,r){var c={id:"matchers",title:"Matchers",key:"name",cols:[{id:"name",isKey:!0,isHead:!0},{id:"description",isHead:!0},{id:"field",isHead:!0},{id:"regex"},{id:"formatMatchValue"},{id:"defaultMatchValue"},{id:"multilineAndInvert"},{id:"allOf",formatter:function(e){return ae(e)},editor:function(e){},isHead:!0},{id:"anyOf",formatter:function(e){return ae(e)},editor:function(e){}}],rows:Object.keys(t).map((function(e){return t[e]})),onSave:a,onChange:n,onDelete:r};return h.a.createElement(ee,c)}function ae(e){return h.a.createElement("ul",null,e.map((function(e){return[h.a.createElement("li",null,h.a.createElement("span",{class:"tag",background:"red"},e))]})))}n(142);var re=function(){return h.a.createElement(m.d,null,h.a.createElement(m.b,null,h.a.createElement(m.a,null,"Logs"),h.a.createElement(m.a,null,"Feeder Status"),h.a.createElement(m.a,null,"Configuration")),h.a.createElement(m.c,{forceRender:!0},h.a.createElement(Q,null)),h.a.createElement(m.c,null,h.a.createElement(U,null)),h.a.createElement(m.c,null,h.a.createElement(te,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));p.a.render(h.a.createElement(h.a.StrictMode,null,h.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},63:function(e,t,n){e.exports=n(143)},68:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){}},[[63,1,2]]]);
//# sourceMappingURL=main.cfda2318.chunk.js.map